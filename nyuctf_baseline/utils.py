from datetime import datetime
from .ctflogging import status

class CallIDGenerator:
    def __init__(self):
        self._id = 0

    def __call__(self):
        self._id += 1
        # status.debug_message(f"Call ID call-{self._id} generated by {inspect.stack()[1].function}")
        return f"call-{self._id}"

    def reset(self):
        self._id = 0

CALL_ID = CallIDGenerator()

def str2bool(s  : str) -> bool:
    """Convert a string to a boolean, with some reasonable variants on 'true'."""
    return str(s).strip().lower() in {"true", "1", "t", "y", "yes"}

def timestamp() -> str:
    """Return a timestamp string."""
    return datetime.now().astimezone().isoformat()
